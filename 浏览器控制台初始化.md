# ğŸŒ ä½¿ç”¨æµè§ˆå™¨æ§åˆ¶å°åˆå§‹åŒ–

## ğŸ¯ æœ€ç®€å•çš„æ–¹æ³•

ç”±äºå‘½ä»¤è¡Œè„šæœ¬é‡åˆ°ä¾èµ–é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰‹åŠ¨åˆå§‹åŒ–ã€‚

---

## ğŸ“‹ æ­¥éª¤

### æ­¥éª¤ 1: æ‰“å¼€å‰ç«¯é¡µé¢

è®¿é—®ï¼š
```
http://localhost:3000/admin/initialize
```

### æ­¥éª¤ 2: æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°

æŒ‰ `F12` æˆ–å³é”® â†’ æ£€æŸ¥ â†’ Console

### æ­¥éª¤ 3: è¿æ¥é’±åŒ…

ç‚¹å‡»å³ä¸Šè§’è¿æ¥ Solana é’±åŒ…

### æ­¥éª¤ 4: åœ¨æ§åˆ¶å°è¿è¡Œåˆå§‹åŒ–ä»£ç 

å¤åˆ¶å¹¶ç²˜è´´ä»¥ä¸‹ä»£ç åˆ°æ§åˆ¶å°ï¼š

```javascript
// è·å–å¿…è¦çš„å¯¹è±¡
const { Connection, PublicKey, SystemProgram } = window.solanaWeb3;
const { BN, Program, AnchorProvider } = window.anchor;

// é…ç½®
const PROGRAM_ID = new PublicKey('78LNFkZn5wjKjscWWDXe7ChmmZ9Fu1g6rhGfCJPy7BmR');
const USDC_MINT = new PublicKey('EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v');
const TOKEN_PROGRAM_ID = new PublicKey('TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA');
const ASSOCIATED_TOKEN_PROGRAM_ID = new PublicKey('ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL');

// åˆå§‹åŒ–å‡½æ•°
async function initConfig() {
  try {
    console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–...');
    
    // è·å–é’±åŒ…
    const wallet = window.solana;
    if (!wallet || !wallet.publicKey) {
      throw new Error('è¯·å…ˆè¿æ¥é’±åŒ…ï¼');
    }
    
    console.log('ğŸ”‘ é’±åŒ…:', wallet.publicKey.toBase58());
    
    // åˆ›å»ºè¿æ¥
    const connection = new Connection('https://api.devnet.solana.com', 'confirmed');
    
    // è®¡ç®— PDA
    const [configPDA] = PublicKey.findProgramAddressSync(
      [Buffer.from('config')],
      PROGRAM_ID
    );
    
    const [globalVaultPDA] = PublicKey.findProgramAddressSync(
      [Buffer.from('global')],
      PROGRAM_ID
    );
    
    console.log('ğŸ“‹ Config PDA:', configPDA.toBase58());
    console.log('ğŸ“‹ Global Vault:', globalVaultPDA.toBase58());
    
    // è·å– Global Vault USDC ATA
    const [globalVaultUsdcAta] = PublicKey.findProgramAddressSync(
      [
        globalVaultPDA.toBuffer(),
        TOKEN_PROGRAM_ID.toBuffer(),
        USDC_MINT.toBuffer(),
      ],
      ASSOCIATED_TOKEN_PROGRAM_ID
    );
    
    console.log('ğŸ’° Global Vault USDC ATA:', globalVaultUsdcAta.toBase58());
    
    // å‡†å¤‡é…ç½®å‚æ•°
    const configParams = {
      authority: wallet.publicKey,
      pendingAuthority: PublicKey.default,
      teamWallet: wallet.publicKey,
      platformBuyFee: new BN(30),
      platformSellFee: new BN(30),
      lpBuyFee: new BN(20),
      lpSellFee: new BN(20),
      tokenSupplyConfig: new BN('1000000000000'),
      tokenDecimalsConfig: 6,
      initialRealTokenReservesConfig: new BN('500000000'),
      minSolLiquidity: new BN('5000000000'),
      minTradingLiquidity: new BN('100000000'),
      initialized: false,
      isPaused: false,
      whitelistEnabled: false,
      usdcMint: USDC_MINT,
      usdcVaultMinBalance: new BN('1000000'),
      minUsdcLiquidity: new BN('100000000'),
      lpInsurancePoolBalance: new BN('0'),
      lpInsuranceAllocationBps: 2000,
      insuranceLossThresholdBps: 1000,
      insuranceMaxCompensationBps: 5000,
      insurancePoolEnabled: false,
    };
    
    console.log('ğŸ“¤ å‡†å¤‡å‘é€äº¤æ˜“...');
    console.log('token_decimals_config:', configParams.tokenDecimalsConfig);
    
    // åˆ›å»ºäº¤æ˜“æŒ‡ä»¤
    const instruction = {
      keys: [
        { pubkey: wallet.publicKey, isSigner: true, isWritable: true },
        { pubkey: configPDA, isSigner: false, isWritable: true },
        { pubkey: globalVaultPDA, isSigner: false, isWritable: true },
        { pubkey: globalVaultUsdcAta, isSigner: false, isWritable: true },
        { pubkey: USDC_MINT, isSigner: false, isWritable: false },
        { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },
        { pubkey: TOKEN_PROGRAM_ID, isSigner: false, isWritable: false },
        { pubkey: ASSOCIATED_TOKEN_PROGRAM_ID, isSigner: false, isWritable: false },
      ],
      programId: PROGRAM_ID,
      data: Buffer.from([]) // éœ€è¦æ­£ç¡®ç¼–ç 
    };
    
    console.log('âš ï¸  æ³¨æ„ï¼šè¿™ä¸ªæ–¹æ³•éœ€è¦æ‰‹åŠ¨ç¼–ç æŒ‡ä»¤æ•°æ®');
    console.log('å»ºè®®ä½¿ç”¨å‰ç«¯é¡µé¢çš„ "Initialize Configuration" æŒ‰é’®');
    
  } catch (error) {
    console.error('âŒ é”™è¯¯:', error);
  }
}

// è¿è¡Œ
initConfig();
```

---

## âš ï¸ æ›´ç®€å•çš„æ–¹æ³•

å®é™…ä¸Šï¼Œ**ç›´æ¥ä½¿ç”¨å‰ç«¯é¡µé¢çš„æŒ‰é’®**æ˜¯æœ€ç®€å•çš„ï¼š

### æ­¥éª¤ 1: è®¿é—®é¡µé¢
```
http://localhost:3000/admin/initialize
```

### æ­¥éª¤ 2: è¿æ¥é’±åŒ…
ç‚¹å‡»å³ä¸Šè§’è¿æ¥é’±åŒ…

### æ­¥éª¤ 3: ç‚¹å‡»æŒ‰é’®
ç‚¹å‡» "Initialize Configuration"

### æ­¥éª¤ 4: æŸ¥çœ‹æ§åˆ¶å°
æ‰“å¼€æ§åˆ¶å°ï¼ˆF12ï¼‰æŸ¥çœ‹è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼š
- `token_decimals_config` çš„å€¼
- å®Œæ•´çš„é…ç½®å¯¹è±¡
- é”™è¯¯ä¿¡æ¯

---

## ğŸ” è°ƒè¯•ä¿¡æ¯

å½“ä½ ç‚¹å‡» "Initialize Configuration" æ—¶ï¼Œæ§åˆ¶å°ä¼šæ˜¾ç¤ºï¼š

```
ğŸ” Configuration Parameters:
token_decimals_config: 6
token_supply_config: 1000000000000
initial_real_token_reserves_config: 500000000
Full config: { ... }
```

**è¯·æˆªå›¾å¹¶å‘Šè¯‰æˆ‘ï¼š**
1. `token_decimals_config` çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ
2. å®ƒçš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆnumber è¿˜æ˜¯ stringï¼Ÿï¼‰
3. å®Œæ•´çš„é”™è¯¯æ¶ˆæ¯

---

## ğŸ’¡ ä¸ºä»€ä¹ˆå‰ç«¯å¯èƒ½å¤±è´¥

å¯èƒ½çš„åŸå› ï¼š

### 1. Anchor ç‰ˆæœ¬ä¸åŒ¹é…
å‰ç«¯ä½¿ç”¨çš„ Anchor ç‰ˆæœ¬ä¸åˆçº¦ä¸åŒ

### 2. IDL ä¸åŒæ­¥
å‰ç«¯çš„ IDL æ–‡ä»¶å¯èƒ½ä¸æ˜¯æœ€æ–°çš„

### 3. åºåˆ—åŒ–é—®é¢˜
JavaScript å¯¹è±¡åºåˆ—åŒ–ä¸ Rust æœŸæœ›çš„æ ¼å¼ä¸åŒ¹é…

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **åˆ·æ–°å‰ç«¯é¡µé¢**
2. **æ‰“å¼€æ§åˆ¶å°ï¼ˆF12ï¼‰**
3. **ç‚¹å‡» "Initialize Configuration"**
4. **æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º**
5. **å‘Šè¯‰æˆ‘ `token_decimals_config` çš„å€¼**

è¿™æ ·æˆ‘ä»¬å°±èƒ½å‡†ç¡®å®šä½é—®é¢˜ï¼

---

**ç°åœ¨å°±è¯•è¯•ï¼Œå¹¶å‘Šè¯‰æˆ‘æ§åˆ¶å°æ˜¾ç¤ºäº†ä»€ä¹ˆï¼** ğŸ”
