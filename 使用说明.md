# 预测市场前端使用说明

## ✅ 当前状态

**前端已成功启动并运行！**

- 🌐 本地访问: http://localhost:3000
- 🌐 网络访问: http://192.168.2.1:3000
- ✅ 所有依赖已安装
- ✅ 合约已对接
- ✅ 开发服务器运行中

---

## 🎯 快速使用

### 1. 访问应用

在浏览器中打开：
```
http://localhost:3000
```

### 2. 连接钱包

- 点击页面上的"连接钱包"按钮
- 选择你的 Solana 钱包（如 Phantom、Solflare 等）
- 确保钱包连接到 **Devnet** 网络

### 3. 获取测试代币

在 Devnet 上测试需要：
- **SOL** - 用于支付交易费用
- **USDC** - 用于交易预测市场代币

获取测试 SOL:
```
https://faucet.solana.com/
```

### 4. 浏览市场

- 访问 `/markets` 查看所有市场
- 点击市场卡片查看详情
- 查看 YES/NO 代币价格

### 5. 交易代币

在市场详情页：
1. 选择买入或卖出
2. 选择 YES 或 NO 代币
3. 输入金额
4. 确认交易

---

## 📁 项目结构

```
x402-polymarket-frontend/
├── app/
│   ├── page.tsx              # 首页
│   ├── markets/              # 市场相关页面
│   │   ├── page.tsx          # 市场列表
│   │   ├── create/           # 创建市场
│   │   └── [address]/        # 市场详情
│   ├── lib/solana/           # Solana 集成
│   │   ├── client.ts         # 合约客户端
│   │   ├── program.ts        # 程序配置
│   │   └── types.ts          # 类型定义
│   └── hooks/
│       └── usePredictionMarket.ts  # React Hook
├── components/
│   ├── market/               # 市场组件
│   └── wallet/               # 钱包组件
└── .env.local                # 环境配置
```

---

## 🔧 配置说明

### 环境变量 (`.env.local`)

已配置的关键变量：

```bash
# Solana 网络配置
NEXT_PUBLIC_SOLANA_NETWORK=devnet
NEXT_PUBLIC_SOLANA_RPC_ENDPOINT=https://api.devnet.solana.com

# 合约地址
NEXT_PUBLIC_PROGRAM_ID=78LNFkZn5wjKjscWWDXe7ChmmZ9Fu1g6rhGfCJPy7BmR
```

### 需要配置的项目

**WalletConnect Project ID** (可选，用于多钱包支持):
1. 访问 https://cloud.walletconnect.com/
2. 注册并创建项目
3. 复制 Project ID
4. 更新 `.env.local` 中的 `NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID`

---

## 🎮 主要功能

### 1. 查看市场

- 浏览所有可用的预测市场
- 查看市场统计数据
- 查看当前价格

### 2. 创建市场

管理员可以创建新市场：
- 设置市场问题
- 配置代币符号和元数据
- 设置开始和结束时间

### 3. 交易

用户可以：
- 买入 YES 代币（看涨）
- 买入 NO 代币（看跌）
- 卖出持有的代币

### 4. 流动性管理

流动性提供者可以：
- 添加流动性赚取手续费
- 提取流动性
- 查看收益

### 5. 完整集操作

- 铸造完整集：用 1 USDC 获得 1 YES + 1 NO
- 赎回完整集：销毁 1 YES + 1 NO 换回 1 USDC

---

## 🛠️ 开发命令

```bash
# 进入项目目录
cd x402-polymarket-frontend

# 启动开发服务器（已运行）
pnpm dev

# 构建生产版本
pnpm build

# 启动生产服务器
pnpm start

# 代码检查
pnpm lint
```

---

## 📊 合约信息

### 部署信息

- **Program ID**: `78LNFkZn5wjKjscWWDXe7ChmmZ9Fu1g6rhGfCJPy7BmR`
- **网络**: Solana Devnet
- **RPC 端点**: https://api.devnet.solana.com

### 支持的操作

| 操作 | 说明 | 权限 |
|------|------|------|
| 创建市场 | 创建新的预测市场 | 白名单用户 |
| 交易 | 买入/卖出代币 | 所有用户 |
| 添加流动性 | 提供流动性 | 所有用户 |
| 提取流动性 | 移除流动性 | 流动性提供者 |
| 铸造完整集 | 铸造 YES+NO | 所有用户 |
| 赎回完整集 | 赎回 USDC | 所有用户 |

---

## 🐛 常见问题

### Q: 钱包无法连接？

**A:** 确保：
1. 已安装 Solana 钱包扩展（如 Phantom）
2. 钱包切换到 Devnet 网络
3. 浏览器允许钱包扩展

### Q: 交易失败？

**A:** 检查：
1. 钱包是否有足够的 SOL（交易费）
2. 钱包是否有足够的 USDC（交易金额）
3. 市场是否处于活跃状态
4. 查看浏览器控制台的错误信息

### Q: 看不到市场列表？

**A:** 可能原因：
1. RPC 连接问题 - 刷新页面重试
2. 还没有创建市场 - 先创建一个市场
3. 网络问题 - 检查网络连接

### Q: 价格显示不正确？

**A:** 
1. 等待几秒让数据加载
2. 刷新页面
3. 检查 RPC 连接

---

## 📈 使用流程示例

### 场景 1: 交易者

1. 连接钱包
2. 浏览市场列表
3. 选择感兴趣的市场
4. 分析价格和流动性
5. 买入 YES 或 NO 代币
6. 等待市场结算
7. 如果预测正确，获得收益

### 场景 2: 流动性提供者

1. 连接钱包
2. 选择市场
3. 添加流动性（提供 USDC）
4. 赚取交易手续费
5. 随时可以提取流动性

### 场景 3: 市场创建者

1. 连接管理员钱包
2. 访问创建市场页面
3. 填写市场信息
4. 设置参数
5. 创建市场
6. 添加初始流动性

---

## 🔐 安全提示

1. **仅在 Devnet 测试** - 当前配置为测试网络
2. **不要使用真实资金** - Devnet 代币没有价值
3. **保护私钥** - 永远不要分享你的私钥
4. **验证交易** - 交易前仔细检查参数

---

## 📚 更多资源

### 文档

- [完整集成指南](./INTEGRATION_GUIDE.md)
- [架构说明](./x402-polymarket-frontend/ARCHITECTURE.md)
- [合约文档](./contract/README.md)

### 外部资源

- [Solana 文档](https://docs.solana.com/)
- [Anchor 框架](https://www.anchor-lang.com/)
- [Next.js 文档](https://nextjs.org/docs)

---

## 🎉 开始使用

现在你可以：

1. 打开浏览器访问 http://localhost:3000
2. 连接你的 Solana 钱包
3. 开始探索预测市场！

**祝你使用愉快！** 🚀
